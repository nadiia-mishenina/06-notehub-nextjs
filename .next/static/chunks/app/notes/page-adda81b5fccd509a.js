(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[151],{1516:function(e,t,n){Promise.resolve().then(n.bind(n,7464)),Promise.resolve().then(n.bind(n,2094)),Promise.resolve().then(n.bind(n,4984)),Promise.resolve().then(n.bind(n,9827)),Promise.resolve().then(n.bind(n,4147)),Promise.resolve().then(n.bind(n,2868)),Promise.resolve().then(n.bind(n,7026)),Promise.resolve().then(n.bind(n,1770)),Promise.resolve().then(n.bind(n,6451)),Promise.resolve().then(n.bind(n,8164)),Promise.resolve().then(n.bind(n,1632)),Promise.resolve().then(n.bind(n,3244)),Promise.resolve().then(n.bind(n,7985)),Promise.resolve().then(n.bind(n,7984))},7464:function(e,t,n){"use strict";n.d(t,{default:function(){return F}});var a=n(7437),s=n(2265),i=n(1632),o=n(9376),r=n(9116),l=n(551),c=n.n(l);function u(e){let{onSearch:t}=e;return(0,a.jsx)("input",{className:c().input,type:"text",placeholder:"Search notes",onChange:e=>{t(e.target.value)}})}var m=n(7314),d=n(4422),_=n(9827),h=n(1770),p=n(7127),b=n.n(p);let N=["Todo","Work","Personal","Meeting","Shopping"],g=d.Ry({title:d.Z_().min(3,"Title must be at least 3 characters").max(50,"Title must be at most 50 characters").required("Title is required"),content:d.Z_().max(500,"Content must be at most 500 characters"),tag:d.nK().oneOf(N,"Invalid tag").required("Tag is required")}),x={title:"",content:"",tag:"Todo"};function v(e){let{onCancel:t}=e,n=(0,_.useQueryClient)(),{mutate:s,isPending:i}=(0,h.useMutation)({mutationFn:e=>(0,r.kT)(e),onSuccess:()=>{n.invalidateQueries({queryKey:["notes"]}),null==t||t()}});return(0,a.jsx)(m.J9,{initialValues:x,validationSchema:g,onSubmit:e=>{s(e)},validateOnBlur:!0,validateOnChange:!0,children:(0,a.jsxs)(m.l0,{className:b().form,children:[(0,a.jsxs)("div",{className:b().formGroup,children:[(0,a.jsx)("label",{htmlFor:"title",children:"Title"}),(0,a.jsx)(m.gN,{id:"title",type:"text",name:"title",className:b().input}),(0,a.jsx)("span",{className:b().error,children:(0,a.jsx)(m.Bc,{name:"title"})})]}),(0,a.jsxs)("div",{className:b().formGroup,children:[(0,a.jsx)("label",{htmlFor:"content",children:"Content"}),(0,a.jsx)(m.gN,{as:"textarea",id:"content",name:"content",rows:8,className:b().textarea}),(0,a.jsx)("span",{className:b().error,children:(0,a.jsx)(m.Bc,{name:"content"})})]}),(0,a.jsxs)("div",{className:b().formGroup,children:[(0,a.jsx)("label",{htmlFor:"tag",children:"Tag"}),(0,a.jsx)(m.gN,{as:"select",id:"tag",name:"tag",className:b().select,children:N.map(e=>(0,a.jsx)("option",{value:e,children:e},e))}),(0,a.jsx)("span",{className:b().error,children:(0,a.jsx)(m.Bc,{name:"tag"})})]}),(0,a.jsxs)("div",{className:b().actions,children:[(0,a.jsx)("button",{type:"button",className:b().cancelButton,onClick:()=>null==t?void 0:t(),disabled:!t,children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:b().submitButton,disabled:i,children:"Create note"})]})]})})}var j=n(7648),f=n(4231),P=n.n(f);function C(e){let{notes:t}=e,n=(0,_.useQueryClient)(),{mutate:s,isPending:i}=(0,h.useMutation)({mutationFn:e=>(0,r.f_)(e),onSuccess:()=>{n.invalidateQueries({queryKey:["notes"]})}});return(0,a.jsx)("ul",{className:P().list,children:t.map(e=>(0,a.jsxs)("li",{className:P().listItem,children:[(0,a.jsx)("h2",{className:P().title,children:e.title}),(0,a.jsx)("p",{className:P().content,children:e.content}),(0,a.jsxs)("div",{className:P().footer,children:[(0,a.jsx)("span",{className:P().tag,children:e.tag}),(0,a.jsxs)("div",{className:P().actions,children:[(0,a.jsx)(j.default,{href:"/notes/".concat(e.id),className:P().link,children:"View details"}),(0,a.jsx)("button",{className:P().button,type:"button",disabled:i,onClick:()=>s(e.id),children:"Delete"})]})]})]},e.id))})}var y=n(5103),k=n.n(y),L=n(729),S=n.n(L);function w(e){let{page:t,totalPages:n,onPageChange:s}=e;return n<=1?null:(0,a.jsx)(k(),{pageCount:n,forcePage:t-1,onPageChange:e=>{s(e.selected+1)},containerClassName:S().pagination,pageClassName:S().page,pageLinkClassName:S().pageLink,previousClassName:S().prev,nextClassName:S().next,breakClassName:S().break,activeClassName:S().active,disabledClassName:S().disabled,previousLabel:"←",nextLabel:"→",breakLabel:"..."})}var q=n(2710),I=n.n(q);function F(e){let{initialQuery:t,initialPage:n}=e,l=(0,o.useRouter)(),c=(0,o.usePathname)(),[m,d]=(0,s.useState)(t),[_,h]=(0,s.useState)(n);(0,s.useEffect)(()=>{let e=new URLSearchParams;m.trim()&&e.set("q",m.trim()),_>1&&e.set("page",String(_));let t=e.toString();l.replace(t?"".concat(c,"?").concat(t):c)},[m,_,l,c]);let{data:p,isLoading:b,error:N}=(0,i.useQuery)({queryKey:["notes",{search:m,page:_,perPage:12}],queryFn:()=>(0,r.jO)({page:_,perPage:12,...m?{search:m}:{}})});return b?(0,a.jsx)("p",{children:"Loading, please wait..."}):N||!p?(0,a.jsx)("p",{children:"Something went wrong."}):(0,a.jsxs)("main",{className:I().container,children:[(0,a.jsx)(u,{onSearch:e=>{d(e),h(1)}}),(0,a.jsx)(v,{}),(0,a.jsx)(C,{notes:p.notes}),(0,a.jsx)(w,{page:_,totalPages:p.totalPages,onPageChange:e=>h(e)})]})}},9116:function(e,t,n){"use strict";n.d(t,{f_:function(){return c},jO:function(){return o},kT:function(){return l},nb:function(){return r}});var a=n(3464);let s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InlhLm5hZGVnZGEyMDE0QGdtYWlsLmNvbSIsImlhdCI6MTc3MDEyNTQzOH0.OvonqmuI_sqZieEoNkcqKqq_o9u4xCjRHvwjz9KdTw8",i=a.Z.create({baseURL:"https://notehub-public.goit.study/api"});i.interceptors.request.use(e=>{if(s){var t;e.headers=null!==(t=e.headers)&&void 0!==t?t:{},e.headers.Authorization="Bearer ".concat(s)}return e});let o=async e=>(await i.get("/notes",{params:{page:e.page,perPage:e.perPage,...e.search?{search:e.search}:{}}})).data,r=async e=>(await i.get("/notes/".concat(e))).data,l=async e=>(await i.post("/notes",e)).data,c=async e=>(await i.delete("/notes/".concat(e))).data},2710:function(e){e.exports={app:"NotesPage_app__UkSJw",toolbar:"NotesPage_toolbar__M7vho",button:"NotesPage_button__lzTbK"}},7127:function(e){e.exports={form:"NoteForm_form__kBK_0",formGroup:"NoteForm_formGroup__bS5ba",input:"NoteForm_input__28hgd",textarea:"NoteForm_textarea__kzing",select:"NoteForm_select__Go8Rq",actions:"NoteForm_actions__aG_Xr",submitButton:"NoteForm_submitButton__vSvUI",cancelButton:"NoteForm_cancelButton__c33li",error:"NoteForm_error__swtoj"}},4231:function(e){e.exports={list:"NoteList_list__shWPg",listItem:"NoteList_listItem__SuGUK",title:"NoteList_title__yrB3L",content:"NoteList_content__K8ntu",button:"NoteList_button__J1AiO",footer:"NoteList_footer__lWpqj",tag:"NoteList_tag__obj_m",link:"NoteList_link__Q73wC"}},729:function(e){e.exports={pagination:"Pagination_pagination__O7JWM",active:"Pagination_active__awQnD"}},551:function(e){e.exports={input:"SearchBox_input__0g6b5"}}},function(e){e.O(0,[110,416,529,972,204,971,117,744],function(){return e(e.s=1516)}),_N_E=e.O()}]);